# 超低温温度测量模块 - 原理图设计文档

## 文档信息

| 项目 | 内容 |
|------|------|
| 项目名称 | 超低温温度测量模块 |
| 原理图版本 | V1.0 |
| 图纸编号 | Schematic6 |
| 图纸页数 | 4页 (P1-P4) |
| 图纸尺寸 | A4 |
| 设计单位 | 嘉立创EDA / 测量仪器开发组 |
| 创建日期 | 2025-09-26 |
| 更新日期 | 2025-09-26 |

---

## 1. 系统概述

### 1.1 功能简介

Ultra-TM02型超低温温度测量模块是一款高精度温度测量设备，专门用于二极管式温度探头的超低温测量，支持用户自定义探头分度表。

### 1.2 主要技术指标

| 参数 | 规格 |
|------|------|
| 温度测量范围 | 1.4K ~ 500K (-271.75℃ ~ 226.85℃) |
| 显示分辨率 | 0.001℃ |
| 最大允许误差 | 低温段 ±1℃，高温段 ±2℃ |
| ADC精度 | 24位 |
| 内部电流源精度 | ≤0.05% |
| 数据更新率 | 最高1次/秒 |
| 探头类型 | 二极管式（4线差分） |
| 激励电流 | 10μA / 17μA可选 |
| 输出形式 | 4-20mA（两线制） |
| 供电电压 | 24V DC |
| 显示屏 | 3.5寸液晶 |

### 1.3 系统框图

```
┌─────────────────────────────────────────────────────────────────┐
│                        超低温温度测量模块                          │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────┐    ┌─────────┐    ┌─────────┐    ┌─────────┐     │
│  │ 24V输入  │───→│ 电源管理 │───→│ 多轨电源 │───→│ 各功能块 │     │
│  └─────────┘    └─────────┘    └─────────┘    └─────────┘     │
│                                                                 │
│  ┌─────────┐    ┌─────────┐    ┌─────────┐    ┌─────────┐     │
│  │ 温度探头 │───→│ 信号调理 │───→│ ADC采集  │───→│ STM32   │     │
│  └─────────┘    └─────────┘    └─────────┘    └─────────┘     │
│                                                    │           │
│                    ┌───────────────────────────────┤           │
│                    ↓              ↓                ↓           │
│              ┌─────────┐   ┌─────────┐      ┌─────────┐       │
│              │ LCD显示  │   │ USB通讯 │      │ 4-20mA  │       │
│              └─────────┘   └─────────┘      └─────────┘       │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 2. 电源系统设计 (P3)

### 2.1 电源架构

本设计采用**三地隔离**架构，实现数字、模拟和输出电路的完全隔离：

```
+24V输入(CN14)
    │
    ├─→ U62 ─→ +5VD ─→ U82 ─→ 3V3 (数字电路)
    │
    ├─→ U63 ─→ +9VA ─→ U65 ─→ 6.5VA ─→ U85 ─→ 5VA (模拟电路)
    │
    └─→ U67 ─→ +9VX ─→ U69 ─→ 6.5VX ─→ U86 ─→ 5VX (隔离输出)
```

### 2.2 电源输入电路

| 器件 | 型号 | 功能 |
|------|------|------|
| CN14 | XH-2A | 24V DC输入端子 |
| U23 | DC-DC | 输入保护与转换 |

### 2.3 数字电源轨

| 电源 | 电压 | 器件 | 负载 |
|------|------|------|------|
| +5VD | 5V | U62 | 数字电路总电源 |
| 3V3 | 3.3V | U82 | STM32主控、逻辑电路 |

**滤波配置：**
- 输入：L24(4.7μH) + C77(10μF) + C78/C79(22μF)
- 3V3输出：C121(10μF) + C122(10μF)

### 2.4 模拟电源轨 (AGND参考)

| 电源 | 电压 | 器件 | 负载 |
|------|------|------|------|
| +9VA | 9V | U63 | 模拟隔离电源 |
| 6.5VA | 6.5V | U65 | 精密基准电压 |
| 5VA | 5V | U85 (LD1117S50TR) | 运放、ADC供电 |

**基准电压调节：**
- R130(240Ω) + R131(820Ω) + R132(500Ω)
- D1/D2 (1N4002W) 反向保护

### 2.5 隔离电源轨 (GNDX参考)

| 电源 | 电压 | 器件 | 负载 |
|------|------|------|------|
| +9VX | 9V | U67 | 输出隔离电源 |
| 6.5VX | 6.5V | U69 | 隔离基准电压 |
| 5VX | 5V | U86 | 4-20mA输出电路 |

**基准电压调节：**
- R133(240Ω) + R134(820Ω) + R135(500Ω)
- D3/D4 (1N4002W) 反向保护

### 2.6 测试点定义

| 测试点 | 信号 | 预期电压 |
|--------|------|----------|
| TP2 | +5VD | 5.0V ±5% |
| TP3 | +3.3V | 3.3V ±3% |
| TP4 | +6.5VA | 6.5V ±1% |
| TP5 | +6.5VX | 6.5V ±1% |
| TP6 | DGND | 0V (数字地) |
| TP7 | AGND | 0V (模拟地) |
| TP8 | GNDX | 0V (隔离地) |

---

## 3. 主控电路设计 (P2)

### 3.1 MCU选型

| 参数 | 规格 |
|------|------|
| 型号 | STM32F411RET6 |
| 内核 | ARM Cortex-M4 |
| 主频 | 100MHz |
| Flash | 512KB |
| RAM | 128KB |
| 封装 | LQFP-64 |
| 工作电压 | 3.3V |

### 3.2 时钟电路

**主晶振 (OSC1):**
- 频率：12MHz
- 负载电容：C123 (100nF)
- 连接：PH0-OSC_IN, PH1-OSC_OUT

### 3.3 复位与调试

**SWD调试接口 (H1 - PZ254V-11-04P):**

| 引脚 | 信号 | 功能 |
|------|------|------|
| 1 | 3V3 | 电源 |
| 2 | DGND | 地 |
| 3 | SWDIO | 数据 |
| 4 | JTCK-SWCLK | 时钟 |

### 3.4 GPIO分配

**SPI控制信号：**
| 信号 | 功能 |
|------|------|
| IO_DAC1_CS | DAC1片选 |
| IO_DAC2_CS | DAC2片选 |
| IO_DAC_ADC_MOSI | SPI数据输出 |
| IO_DAC_ADC_SCK | SPI时钟 |
| IO_DAC_ADC_MISO | SPI数据输入 |
| IO_DAC2_LOAD | DAC2加载 |
| IO_ADC1_CS | ADC1片选 |

**串口信号：**
| 信号 | 功能 |
|------|------|
| IO_USART6_TX | LCD发送 |
| IO_USART6_RX | LCD接收 |

### 3.5 LCD显示接口

**FPC接口 (FPC1 - LCD 1.25-4PWB):**

| 引脚 | 信号 |
|------|------|
| 1 | DGND |
| 2 | +5VD |
| 3 | IO_USART6_RX |
| 4 | IO_USART6_TX |

### 3.6 去耦电容配置

| 电容 | 规格 | 位置 |
|------|------|------|
| C58-C62 | 100nF | 各VDD引脚 |
| C68 | 10uF | 大电容去耦 |
| C76 | 2.2uF | 中频去耦 |
| C63 | 100nF | DGND附近 |

### 3.7 状态指示

**LED1 (KT-0805G):**
- 颜色：绿色
- 限流电阻：R120, R104
- 功能：电源/运行状态指示

---

## 4. 信号采集电路设计 (P1)

### 4.1 信号链路

```
探头 → U89.1连接器 → U74(OPA335) → U75 → U87(G=2) → U76(ADC)
                     前置放大      二级放大  增益放大    数字采集
```

### 4.2 探头接口

**U89.1 连接器 (ZX-XH2.54-4PZZ):**
- 4线差分连接方式
- 支持二极管式温度探头
- Load信号输出

### 4.3 前置放大器

**U74 - OPA335AIDBVR:**

| 参数 | 规格 |
|------|------|
| 类型 | 零漂移精密运放 |
| 偏置电压 | ≤5μV |
| 漂移 | ≤0.05μV/℃ |
| 噪声 | 低噪声设计 |

**外围配置：**
| 元件 | 规格 | 功能 |
|------|------|------|
| R137 | - | 输入调理 |
| C96 | 10nF | 高频滤波 |
| C97 | 3.3nF | 带宽限制 |
| R162/R136 | 100kΩ | 反馈网络 |

### 4.4 增益放大器

**U87 配置：**
- 增益：G = 2
- R164/R157：200kΩ（增益设定）
- C131：500pF（高频补偿）

### 4.5 ADC采集

**U76 - 24位高精度ADC:**

| 引脚 | 信号 | 功能 |
|------|------|------|
| SCLK | DAC_ADC_SCK | SPI时钟 |
| CS# | ADC1_CS | 片选（隔离后） |
| DIN | DAC_ADC_MOSI | 数据输入 |
| DOUT/RDY# | DAC_ADC_MISO | 数据输出 |
| AIN+/AIN- | 差分输入 | 模拟信号输入 |
| VDD | 5VA | 电源 |
| REF- | - | 参考负端 |

**滤波配置：**
| 元件 | 规格 | 功能 |
|------|------|------|
| C104 | 100nF | VDD去耦 |
| C124 | 10nF | 参考滤波 |
| C105 | 10nF | AIN滤波 |
| R142/R143 | 1kΩ | 输入保护 |

### 4.6 光耦隔离

**U78 - PC817D-S:**
- 隔离信号：ADC1_CS
- 输入侧：IO_ADC1_CS (DGND参考)
- 输出侧：ADC1_CS (AGND参考)
- R145：200Ω（LED限流）
- R144：4.7kΩ（输出上拉）

### 4.7 DAC/数字电位器

**U77 多通道配置：**
- 双电源：VDD1/GND1, VDD2/GND2
- 多输出：VA, VB, VC, VD
- 使能控制：NC/EN1, NC/EN2

**U71/U72 电压基准：**
- TP9测试点：Ref5V（5V参考电压）

---

## 5. 输出电路设计 (P4)

### 5.1 DAC2隔离电路

**U83 光耦阵列：**

| 输入信号(DGND) | 输出信号(GNDX) |
|----------------|----------------|
| IO_DAC2_CS | DAC2_CS |
| IO_DAC2_MOSI | DAC2_MOSI |
| IO_DAC2_SCK | DAC2_SCK |
| IO_DAC2_LOAD | DAC2_LOAD |

### 5.2 V/I转换电路

**U79 DAC芯片：**

| 引脚 | 功能 |
|------|------|
| VREF | 参考电压输入 |
| IIN | 电流输入 |
| IRET | 电流返回 |
| B/BASE | 晶体管基极驱动 |
| E/EMITTER | 发射极连接 |
| VREG | 稳压输出 |

**Q2 功率晶体管：**
- 功能：4-20mA电流输出驱动
- R150：20kΩ（DAC输入）

### 5.3 4-20mA输出接口

**CN12/CN13 (ZX-XH2.54-2PZZ):**

| 引脚 | 信号 |
|------|------|
| 1 | +24V NC |
| 2 | GndEx NC |

**输出规格：**
| 参数 | 规格 |
|------|------|
| 电流范围 | 4-20mA |
| 精度 | ±0.1% |
| 负载能力 | 0-500Ω |
| 接线方式 | 两线制 |

### 5.4 输出保护电路

| 元件 | 型号 | 功能 |
|------|------|------|
| D5 | P6KE39A | TVS过压保护 |
| D6-D9 | - | 反接/过流保护 |
| C117 | 10nF | 输出滤波 |
| R146 | 250Ω | 测试电阻 |

### 5.5 测试点

| 测试点 | 信号 | 功能 |
|--------|------|------|
| TP10 | 4-20mA Test | 电流输出测试 |
| TP11 | Vreg | 稳压输出测试 |
| TP12 | Vdac | DAC输出测试 |

---

## 6. USB通讯电路 (P4)

### 6.1 USB接口

**U88 (ZX-XH2.54-4PZZ):**

| 引脚 | 信号 |
|------|------|
| 1 | USB_P |
| 2 | USB_N |
| 3 | GNDI |
| 4 | 屏蔽 |

### 6.2 信号处理

**信号链路：**
```
STM32 → USB_PA/USB_NA → R97 → LCM2 → L26 → USB_P/USB_N → U88
```

**滤波元件：**
| 元件 | 规格 | 功能 |
|------|------|------|
| L26 | 滤波电感 | EMI滤波 |
| R97-R100 | - | 阻抗匹配 |
| C69 | 4.7nF | USB滤波 |

### 6.3 USB规格

| 参数 | 规格 |
|------|------|
| 标准 | USB 2.0 Full Speed |
| 速度 | 12Mbps |
| 类型 | CDC虚拟串口 |
| 接口 | Type-C |

---

## 7. 元器件清单 (BOM)

### 7.1 IC芯片

| 器件 | 型号 | 数量 | 功能 |
|------|------|------|------|
| U22 | STM32F411RET6 | 1 | 主控MCU |
| U74 | OPA335AIDBVR | 1 | 精密运放 |
| U75 | 运放 | 1 | 二级放大 |
| U76 | 24位ADC | 1 | 温度采集 |
| U77 | 数字电位器 | 1 | 信号切换 |
| U78 | PC817D-S | 1 | 光耦隔离 |
| U79 | DAC | 1 | V/I转换 |
| U83 | 光耦阵列 | 1 | DAC2隔离 |
| U85 | LD1117S50TR | 1 | 5VA稳压 |

### 7.2 连接器

| 器件 | 型号 | 数量 | 功能 |
|------|------|------|------|
| CN14 | XH-2A | 1 | 24V电源输入 |
| CN12 | ZX-XH2.54-2PZZ | 1 | 4-20mA输出 |
| CN13 | ZX-XH2.54-2PZZ | 1 | 测试端口 |
| FPC1 | LCD 1.25-4PWB | 1 | LCD接口 |
| H1 | PZ254V-11-04P | 1 | SWD调试 |
| U88 | ZX-XH2.54-4PZZ | 1 | USB接口 |
| U89.1 | ZX-XH2.54-4PZZ | 1 | 探头接口 |

### 7.3 无源元件概览

| 类别 | 数量 | 主要规格 |
|------|------|----------|
| 电阻 | ~40 | 200Ω - 200kΩ |
| 电容 | ~50 | 10nF - 100μF |
| 电感 | ~8 | 4.7μH |
| 晶振 | 2 | 12MHz |
| 二极管 | ~10 | 1N4002W, P6KE39A |
| LED | 1 | KT-0805G (绿色) |

---

## 8. PCB设计建议

### 8.1 层叠结构

建议采用4层板设计：
- Layer 1: 信号层（顶层）
- Layer 2: 地平面
- Layer 3: 电源平面
- Layer 4: 信号层（底层）

### 8.2 布局分区

```
┌──────────────────────────────────┐
│  电源区      │     数字区        │
│ (DC-DC,LDO) │  (STM32,USB)      │
├─────────────┼───────────────────┤
│  模拟区      │    隔离输出区     │
│ (ADC,运放)  │   (4-20mA)        │
└──────────────────────────────────┘
```

### 8.3 地平面设计

- DGND与AGND单点接地
- GNDX完全隔离（通过光耦和隔离DC-DC）
- 避免形成地回路

### 8.4 关键走线要求

| 信号类型 | 阻抗/宽度 | 注意事项 |
|----------|-----------|----------|
| USB差分 | 90Ω ±10% | 等长匹配 |
| SPI信号 | - | 串联22Ω阻抗 |
| 电源走线 | ≥20mil | 星型布线 |
| 模拟信号 | - | 远离数字区 |

---

## 9. 版本历史

| 版本 | 日期 | 修改内容 |
|------|------|----------|
| V1.0 | 2025-09-26 | 初始版本发布 |

---

*本文档由嘉立创EDA测量仪器开发组编制*

